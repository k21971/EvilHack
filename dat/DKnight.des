# NetHack 3.6 DKnight.des $NHDT-Date: 1766588246 2025/12/24 14:57:26 $  $NHDT-Branch: master $:$NHDT-Revision: 1.9 $
#       Copyright (c) 2025 by Keith Simpson
# NetHack may be freely redistributed.  See license for details.
#
#	The Dark Knight quest - alternate quest for chaotic Knights.
#
#	The "start" level for the quest.
#
#	Here you meet your class leader and receive your quest assignment.
#
MAZE: "Dkn-strt",'.'
FLAGS: noteleport,hardfloor
INIT_MAP: mines,'.','P',false,true,unlit,false
GEOMETRY:center,center
#         1         2         3
#1234567890123456789012345678901234567
MAP
................TT....................
.--F--.T................TT......--F--.
.F...F.......TT.............T...F...F.
.--|+-------------++-------------+|--.
..T|..............................|...
...|-----------........-----------|T..
T..|..........|........|..........|..T
T..|....\.....+........+..........|...
...|..........|........|..........|T..
..T|-----------........-----------|T..
...|..............................|...
.--|+----------------------------+|--.
.F...F.....T......T.............F...F.
.--F--.TT.................T.....--F--.
..............T...............T.......
PPPPPPPPP.T..............TT..PPPPPPPPP
ENDMAP
# Dungeon Description
REGION:(00,00,37,15),unlit,"ordinary"
REGION:(04,06,13,08),lit,"throne",unfilled
# Portal arrival point
BRANCH:(18,15,18,15),(0,0,0,0)
# Stairs
STAIR:(32,07),down
# Doors
# Castle entrance
DOOR:locked,(18,03)
DOOR:locked,(19,03)
# Tower entry doors
DOOR:closed,(04,03)
DOOR:closed,(33,03)
DOOR:closed,(04,11)
DOOR:closed,(33,11)
# Chamber doors
DOOR:closed,(14,07)
DOOR:closed,(23,07)
# Quest Leader
MONSTER:('@',"Morgan le Fay"),(08,07)
# Magic chest
MAGIC_CHEST:(06,07)
# Corner tower guardians
MONSTER:('@',"page"),(03,02),peaceful
MONSTER:('@',"page"),(34,02),peaceful
MONSTER:('@',"page"),(03,12),peaceful
MONSTER:('@',"page"),(34,12),peaceful
# Main chamber guardians
MONSTER:('@',"page"),(16,07),peaceful
MONSTER:('@',"page"),(21,07),peaceful
# Throne room guardians
MONSTER:('@',"page"),(06,06)
MONSTER:('@',"page"),(08,06)
MONSTER:('@',"page"),(06,08)
MONSTER:('@',"page"),(08,08)
# Non diggable walls
NON_DIGGABLE:(00,00,37,15)
# Random traps
TRAP:random,random
TRAP:random,random
TRAP:random,random
TRAP:random,random
# Monsters on siege duty
MONSTER:('d',"wolf"),(14,01),hostile
MONSTER:('B',"large hawk"),(16,01),hostile
MONSTER:('d',"wolf"),(18,01),hostile
MONSTER:('B',"hawk"),(20,01),hostile
MONSTER:('d',"wolf"),(22,01),hostile
MONSTER:('d',"wolf"),(14,13),hostile
MONSTER:('B',"hawk"),(16,13),hostile
MONSTER:('d',"wolf"),(18,13),hostile
MONSTER:('B',"hawk"),(20,13),hostile
MONSTER:('d',"wolf"),(22,13),hostile
MONSTER:('B',"large hawk"),(01,06),hostile
MONSTER:('u',"stag"),(01,08),hostile
MONSTER:('B',"large hawk"),(36,06),hostile
MONSTER:('q',"grizzly bear"),(36,08),hostile

#
#	The "locate" level for the quest.
#
#	Here you have to find ancient ruins to make your way to
#	the Caledonia Forest.
#

MAZE: "Dkn-loca",' '
FLAGS: hardfloor
INIT_MAP: mines,'.','.',true,true,lit,false
REPLACE_TERRAIN:(00,00,78,20),'.','g',100%
REPLACE_TERRAIN:(00,00,78,20),'g','T',20%
REPLACE_TERRAIN:(00,00,78,20),'T','t',3%
GEOMETRY:center,center
#         1         2         3         4         5         6         7
#123456789012345678901234567890123456789012345678901234567890123456789012345
MAP
gggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg
gggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg
gggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg
gggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg
gggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg
gggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg
gggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg
gggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg
gggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg
ggggg--....--.gggggggggggggggggggggggggggggggggggggggggggggggggggggggg
ggg---...tt.....gggggggggggggggggggggggggggggggggggggggggggggggggggggg
g...t..--.t....-.-gggggggggggggggggggggggggggggggggggggggggggggggggggg
g|.....-...-.....|gggggggggggggggggggggggggggggggggggggggggggggggggggg
g|.t........|.t..|gggggggggggggggggggggggggggggggggggggggggggggggggggg
g|....--....|.t...gggggggggggggggggggggggggggggggggggggggggggggggggggg
g..-...-........--gggggggggggggggggggggggggggggggggggggggggggggggggggg
ggg---...tt..---gggggggggggggggggggggggggggggggggggggggggggggggggggggg
gggggt.--..---gggggggggggggggggggggggggggggggggggggggggggggggggggggggg
gggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg
gggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg
gggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggggg
ENDMAP
# Dungeon Description
REGION:(00,00,69,20),lit,"ordinary"
# Stairs
STAIR:(09,13),down
STAIR:levregion(69,02,78,18),levregion(64,02,69,18),up
# Branch info
BRANCH:levregion(69,02,78,18),levregion(64,02,69,18)
TELEPORT_REGION:levregion(69,02,78,18),levregion(64,02,69,18)
# populate trees in REGION area
REPLACE_TERRAIN:(19,00,69,20),'g','T',20%
REPLACE_TERRAIN:(19,00,69,20),'T','t',3%
REPLACE_TERRAIN:(00,00,19,08),'g','T',20%
REPLACE_TERRAIN:(00,00,19,08),'T','t',3%
REPLACE_TERRAIN:(00,18,19,20),'g','T',20%
REPLACE_TERRAIN:(00,18,19,20),'T','t',3%
# Temple region
REGION:(02,12,11,14),lit,"temple"
# Altar
ALTAR:(05,13),neutral,shrine
# Objects
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
# Random traps
TRAP:random,random
TRAP:random,random
TRAP:random,random
TRAP:random,random
TRAP:random,random
TRAP:random,random
# Random monsters
MONSTER:('B',"hawk"),random,hostile
MONSTER:('B',"hawk"),random,hostile
MONSTER:('B',"hawk"),random,hostile
MONSTER:('B',"hawk"),random,hostile
MONSTER:('B',"hawk"),random,hostile
MONSTER:('B',"hawk"),random,hostile
MONSTER:('B',"hawk"),random,hostile
MONSTER:('B',"large hawk"),random,hostile
MONSTER:('B',"large hawk"),random,hostile
MONSTER:('d',"wolf"),random,hostile
MONSTER:('d',"wolf"),random,hostile
MONSTER:('d',"wolf"),random,hostile
MONSTER:('d',"wolf"),random,hostile
MONSTER:('d',"wolf"),random,hostile
MONSTER:('d',"wolf"),random,hostile
MONSTER:('d',"wolf"),random,hostile
MONSTER:('d',"wolf"),random,hostile
MONSTER:'u',random,hostile
MONSTER:'q',random,hostile

# Non diggable walls
NON_DIGGABLE:(02,09,17,17)


#
#	The "goal" level for the quest.
#
#	Here you meet the nemesis monster.  You have to defeat the nemesis
#	in combat to gain the artifact you have been assigned to retrieve.
#

MAZE: "Dkn-goal", ' '
INIT_MAP: mines,'.','T',false,true,lit,false
GEOMETRY:center,center
#         1         2         3         4         5         6         7
#123456789012345678901234567890123456789012345678901234567890123456789012345
MAP
T...TTTTTT.TTTTTT...T
...TT...........TT...
..TT.............TT..
..TT.............TT..
..TT.............TT..
...TT...........TT...
T...TTTTTT.TTTTTT...T
ENDMAP
# Dungeon Description
REGION:(00,00,20,06),lit,"ordinary"
# Stairs
STAIR:levregion(01,02,08,18),levregion(09,02,78,18),up
# Non diggable walls
NON_DIGGABLE:(00,00,20,06)
# Objects - quest artifact
OBJECT:('(',"mirror"),(10,03),blessed,0,name:"The Magic Mirror of Merlin"
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
OBJECT:random,random
# Random traps
TRAP:"spiked pit",(13,05)
TRAP:"spiked pit",(12,04)
TRAP:"spiked pit",(12,06)
TRAP:random,random
TRAP:random,random
TRAP:random,random
TRAP:random,random
TRAP:random,random
# Quest nemesis
MONSTER:('@',"Merlin"),(10,03),hostile
# Random monsters
MONSTER:('B',"hawk"),random,hostile
MONSTER:('B',"hawk"),random,hostile
MONSTER:('B',"hawk"),random,hostile
MONSTER:('B',"hawk"),random,hostile
MONSTER:('B',"hawk"),random,hostile
MONSTER:('B',"hawk"),random,hostile
MONSTER:('B',"large hawk"),random,hostile
MONSTER:('B',"large hawk"),random,hostile
MONSTER:('B',"giant hawk"),random,hostile
MONSTER:('B',"giant hawk"),random,hostile
MONSTER:('d',"wolf"),random,hostile
MONSTER:('d',"wolf"),random,hostile
MONSTER:('d',"wolf"),random,hostile
MONSTER:('d',"wolf"),random,hostile
MONSTER:('d',"wolf"),random,hostile
MONSTER:('d',"wolf"),random,hostile
MONSTER:('r',"wolverine"),random,hostile
MONSTER:('r',"wolverine"),random,hostile
MONSTER:'u',random,hostile
MONSTER:'q',random,hostile
MONSTER:'u',random,hostile
MONSTER:'q',random,hostile

#
#	The "fill" levels for the quest.
#
#	These levels are used to fill out any levels not occupied by specific
#	levels as defined above. "fila" is the upper filler, between the
#	start and locate levels, and "filb" the lower between the locate
#	and goal levels.
#

MAZE: "Dkn-fila" , '.'
INIT_MAP: mines,'.','T',false,true,lit,false
NOMAP
REPLACE_TERRAIN:(00,00,78,20),'.','g',100%
REPLACE_TERRAIN:(00,00,78,20),'T','t',3%
#
STAIR: random, up
STAIR: random, down
#
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
#
MONSTER: ('B', "hawk"), random, hostile
MONSTER: ('B', "hawk"), random, hostile
MONSTER: ('B', "hawk"), random, hostile
MONSTER: ('B', "large hawk"), random, hostile
MONSTER: ('d', "wolf"), random, hostile
MONSTER: ('d', "wolf"), random, hostile
MONSTER:'u',random,hostile
MONSTER:'q',random,hostile
#
TRAP: random, random
TRAP: random, random
TRAP: random, random
TRAP: random, random

MAZE: "Dkn-filb" , '.'
INIT_MAP: mines,'.','T',false,true,lit,false
NOMAP
REPLACE_TERRAIN:(00,00,78,20),'.','g',100%
REPLACE_TERRAIN:(00,00,78,20),'T','t',3%
#
STAIR: random, up
STAIR: random, down
#
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
OBJECT: random, random
#
MONSTER: ('B', "hawk"), random, hostile
MONSTER: ('B', "hawk"), random, hostile
MONSTER: ('B', "large hawk"), random, hostile
MONSTER: ('B', "giant hawk"), random, hostile
MONSTER: ('d', "wolf"), random, hostile
MONSTER: ('d', "wolf"), random, hostile
MONSTER: ('d', "wolf"), random, hostile
MONSTER:'u',random,hostile
MONSTER:'q',random,hostile
MONSTER:'u',random,hostile
MONSTER:'q',random,hostile
#
TRAP: random, random
TRAP: random, random
TRAP: random, random
TRAP: random, random
